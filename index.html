<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Skal Hall - Chatbot Demo</title>
<style>
  body {
    font-family: 'Georgia', serif;
    background: #1a1a1a;
    color: #f0ebe3;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  .demo-note {
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    padding: 16px 24px;
    border-radius: 8px;
    margin-bottom: 20px;
    font-size: 14px;
    color: #b8a99a;
    max-width: 500px;
    text-align: center;
  }
  .demo-note code {
    background: rgba(255,255,255,0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: monospace;
    color: #d4c5b2;
  }

  /* ===== CHATBOT STYLES ===== */
  #skal-chat-bubble {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #2c3e35, #4a6741);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    z-index: 9999;
    border: 1px solid rgba(255,255,255,0.15);
  }
  #skal-chat-bubble:hover {
    transform: scale(1.08);
    box-shadow: 0 6px 28px rgba(0,0,0,0.5);
  }
  #skal-chat-bubble svg {
    width: 28px;
    height: 28px;
    fill: #e8ddd0;
  }
  #skal-chat-bubble .notif {
    position: absolute;
    top: -3px;
    right: -3px;
    width: 16px;
    height: 16px;
    background: #c17b3a;
    border-radius: 50%;
    font-size: 10px;
    font-weight: bold;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: sans-serif;
  }

  #skal-chat-window {
    position: fixed;
    bottom: 100px;
    right: 30px;
    width: 360px;
    height: 500px;
    background: #1c1f1d;
    border-radius: 16px;
    box-shadow: 0 16px 48px rgba(0,0,0,0.6);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 9998;
    border: 1px solid rgba(255,255,255,0.1);
    transform: scale(0.9) translateY(20px);
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    font-family: 'Georgia', serif;
  }
  #skal-chat-window.open {
    transform: scale(1) translateY(0);
    opacity: 1;
    pointer-events: all;
  }

  .skal-chat-header {
    background: linear-gradient(135deg, #2c3e35, #3a5232);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }
  .skal-chat-avatar {
    width: 38px;
    height: 38px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    border: 1px solid rgba(255,255,255,0.2);
  }
  .skal-chat-header-info {
    flex: 1;
  }
  .skal-chat-header-info .name {
    font-size: 14px;
    font-weight: bold;
    color: #e8ddd0;
    letter-spacing: 0.05em;
  }
  .skal-chat-header-info .status {
    font-size: 11px;
    color: #7fbb73;
    display: flex;
    align-items: center;
    gap: 4px;
    font-family: sans-serif;
  }
  .skal-chat-header-info .status::before {
    content: '';
    width: 6px;
    height: 6px;
    background: #7fbb73;
    border-radius: 50%;
  }
  .skal-close-btn {
    cursor: pointer;
    color: #b8a99a;
    font-size: 18px;
    line-height: 1;
    padding: 4px;
    border-radius: 4px;
    transition: color 0.2s;
  }
  .skal-close-btn:hover { color: #e8ddd0; }

  .skal-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.1) transparent;
  }
  .skal-messages::-webkit-scrollbar { width: 4px; }
  .skal-messages::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }

  .msg {
    max-width: 82%;
    animation: msgIn 0.3s ease;
  }
  @keyframes msgIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .msg.bot { align-self: flex-start; }
  .msg.user { align-self: flex-end; }

  .msg-bubble {
    padding: 10px 14px;
    border-radius: 14px;
    font-size: 13.5px;
    line-height: 1.5;
  }
  .msg.bot .msg-bubble {
    background: #2a2f2c;
    color: #e0d5c8;
    border-bottom-left-radius: 4px;
    border: 1px solid rgba(255,255,255,0.07);
  }
  .msg.user .msg-bubble {
    background: linear-gradient(135deg, #3a5232, #4a6741);
    color: #f0ebe3;
    border-bottom-right-radius: 4px;
  }
  .msg-time {
    font-size: 10px;
    color: #6b6560;
    margin-top: 4px;
    font-family: sans-serif;
  }
  .msg.user .msg-time { text-align: right; }

  /* Quick reply chips */
  .quick-replies {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 4px;
  }
  .quick-chip {
    background: rgba(74, 103, 65, 0.25);
    border: 1px solid rgba(74, 103, 65, 0.5);
    color: #9dcc8e;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
    font-family: sans-serif;
  }
  .quick-chip:hover {
    background: rgba(74, 103, 65, 0.5);
    color: #d0f0c8;
  }

  /* Typing indicator */
  .typing-indicator {
    align-self: flex-start;
    display: flex;
    gap: 4px;
    align-items: center;
    padding: 12px 16px;
    background: #2a2f2c;
    border-radius: 14px;
    border-bottom-left-radius: 4px;
    border: 1px solid rgba(255,255,255,0.07);
  }
  .typing-dot {
    width: 7px; height: 7px;
    background: #7a8a7a;
    border-radius: 50%;
    animation: typingPulse 1.2s infinite;
  }
  .typing-dot:nth-child(2) { animation-delay: 0.2s; }
  .typing-dot:nth-child(3) { animation-delay: 0.4s; }
  @keyframes typingPulse {
    0%, 60%, 100% { opacity: 0.3; transform: scale(1); }
    30% { opacity: 1; transform: scale(1.2); }
  }

  .skal-input-area {
    padding: 12px 16px;
    border-top: 1px solid rgba(255,255,255,0.07);
    display: flex;
    gap: 10px;
    align-items: center;
    background: #1c1f1d;
  }
  #skal-input {
    flex: 1;
    background: #2a2f2c;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 24px;
    padding: 9px 16px;
    color: #e0d5c8;
    font-size: 13px;
    font-family: 'Georgia', serif;
    outline: none;
    transition: border-color 0.2s;
  }
  #skal-input::placeholder { color: #5a5550; }
  #skal-input:focus { border-color: rgba(74, 103, 65, 0.6); }

  #skal-send {
    width: 36px; height: 36px;
    background: linear-gradient(135deg, #3a5232, #4a6741);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s;
    flex-shrink: 0;
  }
  #skal-send:hover { transform: scale(1.1); }
  #skal-send svg { width: 16px; height: 16px; fill: #e8ddd0; }
</style>
</head>
<body>

<div class="demo-note">
  ğŸŒ² <strong>Demo del Chatbot de Skal Hall</strong><br><br>
  Haz click en el botÃ³n verde (esquina inferior derecha) para abrir el chat.<br><br>
  Para integrarlo en tu pÃ¡gina, copia el cÃ³digo entre los comentarios<br>
  <code>&lt;!-- SKAL HALL CHATBOT --&gt;</code> y <code>&lt;!-- FIN CHATBOT --&gt;</code><br>
  y pÃ©galo justo antes del <code>&lt;/body&gt;</code> de tu HTML.
</div>

<!-- SKAL HALL CHATBOT - Copiar todo desde aquÃ­ -->

<!-- BotÃ³n flotante -->
<div id="skal-chat-bubble" onclick="toggleChat()">
  <svg viewBox="0 0 24 24"><path d="M20 2H4C2.9 2 2 2.9 2 4v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></svg>
  <div class="notif">1</div>
</div>

<!-- Ventana de chat -->
<div id="skal-chat-window">
  <div class="skal-chat-header">
    <div class="skal-chat-avatar">ğŸŒ²</div>
    <div class="skal-chat-header-info">
      <div class="name">SKAL HALL</div>
      <div class="status">En lÃ­nea</div>
    </div>
    <div class="skal-close-btn" onclick="toggleChat()">âœ•</div>
  </div>
  <div class="skal-messages" id="skal-messages"></div>
  <div class="skal-input-area">
    <input id="skal-input" type="text" placeholder="Escribe tu pregunta..." onkeydown="if(event.key==='Enter') sendMessage()">
    <button id="skal-send" onclick="sendMessage()">
      <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>
</div>

<script>
(function() {
  let chatOpen = false;
  let firstOpen = true;

  // Knowledge base del restaurante
  const KB = {
    menu: {
      keywords: ['menÃº','menu','platillos','platos','comida','comer','que sirven','que tienen','carta','opciones'],
      response: `ğŸ½ï¸ <strong>Nuestro MenÃº</strong><br><br>
<strong>Entradas y Platos Principales:</strong><br>
ğŸŸ <em>Gravlax Mexicano</em> â€” $385<br>
ğŸ¥© <em>Cordero NÃ³rdico</em> â€” $495<br>
ğŸ„ <em>Risotto de Hongos</em> â€” $320 â­ vegetariano<br>
ğŸ¦ <em>Camarones Ãrticos</em> â€” $425<br><br>
<strong>Postres:</strong><br>
ğŸ¥§ <em>Tarta de Manzana</em> â€” $185<br>
ğŸ« <em>Mousse de Chocolate</em> â€” $165<br><br>
Â¿Deseas mÃ¡s informaciÃ³n de algÃºn platillo?`,
      chips: ['Gravlax Mexicano', 'Cordero NÃ³rdico', 'Vegetariano', 'Postres']
    },
    gravlax: {
      keywords: ['gravlax','salmÃ³n','salmon','mezcal'],
      response: `ğŸŸ <strong>Gravlax Mexicano â€” $385</strong><br><br>SalmÃ³n curado con <em>mezcal, chile pasilla y cilantro</em>, acompaÃ±ado de crema de aguacate y totopos de maÃ­z azul.<br><br>Una fusiÃ³n perfecta de tÃ©cnica escandinava y sabores mexicanos. Â¡Es uno de nuestros platillos mÃ¡s populares!`
    },
    cordero: {
      keywords: ['cordero','lamb','pierna'],
      response: `ğŸ¥© <strong>Cordero NÃ³rdico â€” $495</strong><br><br>Pierna de cordero asada lentamente con <em>especias escandinavas</em>, purÃ© de papa ahumado y reducciÃ³n de vino tinto.<br><br>Un plato que refleja la esencia de la cocina nÃ³rdica con tÃ©cnica de cocciÃ³n lenta.`
    },
    vegetariano: {
      keywords: ['vegetariano','vegetariana','veggie','sin carne','hongos','risotto'],
      response: `ğŸ„ <strong>Risotto de Hongos â€” $320</strong> â­ Vegetariano<br><br>ChampiÃ±ones silvestres, trufa negra, queso parmesano y aceite de chile morita.<br><br>Es nuestra Ãºnica opciÃ³n vegetariana en platos principales. Â¡Absolutamente deliciosa!`
    },
    postres: {
      keywords: ['postre','postres','dulce','tarta','mousse','chocolate','manzana','dessert'],
      response: `ğŸ° <strong>Nuestros Postres</strong><br><br>
ğŸ¥§ <em>Tarta de Manzana</em> â€” $185<br>Tarta escandinava con manzanas caramelizadas, crema de vainilla y crumble de avena.<br><br>
ğŸ« <em>Mousse de Chocolate</em> â€” $165<br>Chocolate oscuro mexicano con cardamomo nÃ³rdico y nibs de cacao.`
    },
    reservar: {
      keywords: ['reservar','reserva','mesa','book','booking','apartar','lugar'],
      response: `ğŸ“… <strong>Reservaciones</strong><br><br>Â¡Con gusto! Puedes hacer tu reservaciÃ³n:<br><br>ğŸ“± <strong>TelÃ©fono:</strong> +52 55 1234 5678<br>âœ‰ï¸ <strong>Email:</strong> hola@skalhall.com<br>ğŸŒ <strong>Online:</strong> En la secciÃ³n "Reservar" de nuestra pÃ¡gina<br><br>Recomendamos reservar con al menos 2 dÃ­as de anticipaciÃ³n, especialmente para fines de semana.`,
      chips: ['Horarios', 'UbicaciÃ³n', 'Eventos especiales']
    },
    horarios: {
      keywords: ['horario','hora','horarios','cuando','abierto','abren','cierran','open'],
      response: `ğŸ• <strong>Horarios de Skal Hall</strong><br><br>ğŸŸ¢ Lunes â€“ Jueves: 1:00 PM â€“ 11:00 PM<br>ğŸŸ¢ Viernes â€“ SÃ¡bado: 1:00 PM â€“ 12:00 AM<br>ğŸŸ¢ Domingo: 1:00 PM â€“ 10:00 PM<br><br>Servicio de cocina hasta 45 minutos antes del cierre.`
    },
    ubicacion: {
      keywords: ['ubicacion','ubicaciÃ³n','donde','dÃ³nde','direcciÃ³n','direccion','lugar','llegar','maps','mapa'],
      response: `ğŸ“ <strong>Â¿CÃ³mo llegarnos?</strong><br><br><strong>Av. Reforma 123, Col. Polanco</strong><br>Ciudad de MÃ©xico, CDMX 11560<br><br>ğŸš‡ Metro mÃ¡s cercano: Polanco (L7)<br>ğŸš— Valet parking disponible<br>ğŸ…¿ï¸ Estacionamiento en Av. Presidente Masaryk`
    },
    contacto: {
      keywords: ['contacto','contactar','hablar','comunicar','whatsapp','telefono','telÃ©fono','llamar','email','correo'],
      response: `ğŸ“ <strong>ContÃ¡ctanos</strong><br><br>ğŸ“ <strong>TelÃ©fono:</strong> <a href="tel:+525512345678" style="color:#9dcc8e">+52 55 1234 5678</a><br>âœ‰ï¸ <strong>Email:</strong> <a href="mailto:hola@skalhall.com" style="color:#9dcc8e">hola@skalhall.com</a><br><br>TambiÃ©n puedes encontrarnos en redes sociales. Â¡Estamos para servirte!`
    },
    precios: {
      keywords: ['precio','precios','costo','cuanto','cuÃ¡nto','cuesta','pagar','precio promedio'],
      response: `ğŸ’° <strong>Rangos de Precios</strong><br><br>Entradas/Platos: <strong>$320 â€“ $495 MXN</strong><br>Postres: <strong>$165 â€“ $185 MXN</strong><br><br>El costo promedio por persona (sin bebidas) es de <strong>$450 â€“ $600 MXN</strong>.<br>Contamos con carta de vinos y cÃ³cteles artesanales con precios desde $120 MXN.`,
      chips: ['Ver menÃº completo', 'Hacer reservaciÃ³n']
    },
    gracias: {
      keywords: ['gracias','thanks','thank','perfecto','genial','excelente','muy bien','ok','okay'],
      response: `ğŸŒ² Â¡Con mucho gusto! En Skal Hall siempre es un placer atenderte. Â¿Hay algo mÃ¡s en lo que pueda ayudarte?`
    },
    saludo: {
      keywords: ['hola','hello','hi','buenas','buenos','buen dia','buen dÃ­a','quÃ© tal','que tal','saludos'],
      response: `Â¡Hola! Bienvenido a <strong>Skal Hall</strong> ğŸŒ²<br><br>Soy tu asistente virtual. Estoy aquÃ­ para ayudarte con informaciÃ³n sobre nuestro menÃº, reservaciones, horarios y mÃ¡s.<br><br>Â¿En quÃ© puedo ayudarte hoy?`,
      chips: ['Ver MenÃº', 'Hacer ReservaciÃ³n', 'Horarios', 'UbicaciÃ³n']
    }
  };

  window.toggleChat = function() {
    chatOpen = !chatOpen;
    const win = document.getElementById('skal-chat-window');
    const notif = document.querySelector('#skal-chat-bubble .notif');
    if (chatOpen) {
      win.classList.add('open');
      if (notif) notif.style.display = 'none';
      if (firstOpen) {
        firstOpen = false;
        setTimeout(() => botMessage(KB.saludo.response, KB.saludo.chips), 500);
      }
    } else {
      win.classList.remove('open');
    }
  };

  function getTime() {
    return new Date().toLocaleTimeString('es-MX', {hour:'2-digit', minute:'2-digit'});
  }

  function addMessage(html, type, chips) {
    const container = document.getElementById('skal-messages');
    const div = document.createElement('div');
    div.className = `msg ${type}`;
    div.innerHTML = `<div class="msg-bubble">${html}</div><div class="msg-time">${getTime()}</div>`;
    if (chips && chips.length) {
      const chipsDiv = document.createElement('div');
      chipsDiv.className = 'quick-replies';
      chips.forEach(chip => {
        const btn = document.createElement('div');
        btn.className = 'quick-chip';
        btn.textContent = chip;
        btn.onclick = () => { sendMessage(chip); };
        chipsDiv.appendChild(btn);
      });
      div.appendChild(chipsDiv);
    }
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }

  function showTyping() {
    const container = document.getElementById('skal-messages');
    const div = document.createElement('div');
    div.id = 'typing-ind';
    div.className = 'typing-indicator';
    div.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  }

  function hideTyping() {
    const t = document.getElementById('typing-ind');
    if (t) t.remove();
  }

  function botMessage(text, chips) {
    showTyping();
    setTimeout(() => {
      hideTyping();
      addMessage(text, 'bot', chips);
    }, 900 + Math.random() * 500);
  }

  function findResponse(msg) {
    const lower = msg.toLowerCase();
    // Match chips directly
    const chipMap = {
      'ver menÃº': KB.menu,
      'ver menu': KB.menu,
      'menÃº completo': KB.menu,
      'hacer reservaciÃ³n': KB.reservar,
      'horarios': KB.horarios,
      'ubicaciÃ³n': KB.ubicacion,
      'gravlax mexicano': KB.gravlax,
      'cordero nÃ³rdico': KB.cordero,
      'vegetariano': KB.vegetariano,
      'postres': KB.postres,
      'eventos especiales': {response: 'ğŸ‰ Â¡Nos encantarÃ­a ser parte de tu celebraciÃ³n! Para eventos especiales (cumpleaÃ±os, aniversarios, cenas de empresa), contÃ¡ctanos directamente:<br><br>ğŸ“ +52 55 1234 5678<br>âœ‰ï¸ hola@skalhall.com<br><br>Ofrecemos menÃºs especiales y decoraciÃ³n personalizada.'},
    };
    if (chipMap[lower]) return chipMap[lower];

    for (const key in KB) {
      if (KB[key].keywords && KB[key].keywords.some(kw => lower.includes(kw))) {
        return KB[key];
      }
    }
    return null;
  }

  window.sendMessage = function(text) {
    const input = document.getElementById('skal-input');
    const msg = (text || input.value).trim();
    if (!msg) return;
    input.value = '';
    addMessage(msg, 'user');

    const found = findResponse(msg);
    if (found) {
      botMessage(found.response, found.chips || []);
    } else {
      botMessage(`Gracias por tu mensaje. Para ayudarte mejor con "<em>${msg}</em>", te recomendamos contactarnos directamente:<br><br>ğŸ“ <strong>+52 55 1234 5678</strong><br>âœ‰ï¸ <strong>hola@skalhall.com</strong><br><br>Â¡SerÃ¡ un placer atenderte! ğŸŒ²`, ['Horarios', 'UbicaciÃ³n', 'ReservaciÃ³n']);
    }
  };
})();
</script>

<!-- FIN CHATBOT -->

</body>
</html>